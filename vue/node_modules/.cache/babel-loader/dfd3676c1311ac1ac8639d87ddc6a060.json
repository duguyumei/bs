{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dishManage_table\",\n  style: {\n    \"width\": \"100%\"\n  }\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"接单\");\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"派送\");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"正在派送\");\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"已完成\");\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"查看评论\");\n\nconst _hoisted_7 = {\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nconst _hoisted_8 = {\n  class: \"evaluateWindow\",\n  id: \"evaluateWindow\"\n};\nconst _hoisted_9 = {\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"确定\");\n\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"回复\");\n\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"取消\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_table = _resolveComponent(\"el-table\");\n\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_rate = _resolveComponent(\"el-rate\");\n\n  const _component_el_image = _resolveComponent(\"el-image\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_table, {\n    data: $data.tableData,\n    border: \"\",\n    \"row-class-name\": $options.rowClassName\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\"            <el-table-column prop=\\\"id\\\" label=\\\"订单ID\\\" sortable width=\\\"100\\\"/>\"), _createVNode(_component_el_table_column, {\n      prop: \"stime\",\n      label: \"时间\",\n      sortable: \"\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"dish\",\n      label: \"菜品\"\n    }, {\n      default: _withCtx(scope => [_createElementVNode(\"div\", null, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(scope.row.dish, item => {\n        return _openBlock(), _createElementBlock(\"li\", null, _toDisplayString(item), 1\n        /* TEXT */\n        );\n      }), 256\n      /* UNKEYED_FRAGMENT */\n      ))])])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_table_column, {\n      prop: \"message\",\n      label: \"备注\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"people\",\n      label: \"收货人\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"address\",\n      label: \"收货地址\",\n      sortable: \"\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"骑手\",\n      prop: \"ride\"\n    }, {\n      default: _withCtx(scope => [scope.row.state == '已接单,等待配送' ? (_openBlock(), _createBlock(_component_el_select, {\n        key: 0,\n        modelValue: scope.row.ride,\n        \"onUpdate:modelValue\": $event => scope.row.ride = $event,\n        prop: \"ride\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.options, item => {\n          return _openBlock(), _createBlock(_component_el_option, {\n            key: item.code,\n            label: item.name,\n            value: item.code\n          }, null, 8\n          /* PROPS */\n          , [\"label\", \"value\"]);\n        }), 128\n        /* KEYED_FRAGMENT */\n        ))]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"modelValue\", \"onUpdate:modelValue\"])) : (_openBlock(), _createBlock(_component_el_select, {\n        key: 1,\n        modelValue: scope.row.ride,\n        \"onUpdate:modelValue\": $event => scope.row.ride = $event,\n        prop: \"ride\",\n        disabled: \"\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.options, item => {\n          return _openBlock(), _createBlock(_component_el_option, {\n            key: item.code,\n            label: item.name,\n            value: item.code\n          }, null, 8\n          /* PROPS */\n          , [\"label\", \"value\"]);\n        }), 128\n        /* KEYED_FRAGMENT */\n        ))]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"modelValue\", \"onUpdate:modelValue\"]))]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_table_column, {\n      prop: \"state\",\n      label: \"状态\",\n      sortable: \"\"\n    }), _createVNode(_component_el_table_column, {\n      fixed: \"right\",\n      label: \"操作\",\n      width: 100\n    }, {\n      default: _withCtx(scope => [scope.row.state == '等待接单' ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 0,\n        type: \"text\",\n        size: \"small\",\n        onClick: $event => $options.acceptOrder(scope.row)\n      }, {\n        default: _withCtx(() => [_hoisted_2]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])) : _createCommentVNode(\"v-if\", true), scope.row.state == '已接单,等待配送' ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 1,\n        type: \"text\",\n        size: \"small\",\n        onClick: $event => $options.postOrder(scope.row)\n      }, {\n        default: _withCtx(() => [_hoisted_3]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])) : _createCommentVNode(\"v-if\", true), scope.row.state == '正在配送' ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 2,\n        type: \"text\",\n        size: \"small\",\n        style: {\n          \"color\": \"#cccccc\"\n        }\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1\n        /* STABLE */\n\n      })) : _createCommentVNode(\"v-if\", true), scope.row.state == '完成' ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 3,\n        type: \"text\",\n        size: \"small\",\n        style: {\n          \"color\": \"#cccccc\"\n        }\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      })) : _createCommentVNode(\"v-if\", true), scope.row.state == '用户已评论' || scope.row.state == '已回复' ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 4,\n        type: \"text\",\n        size: \"small\",\n        onClick: $event => $options.showEvaluate(scope.row)\n      }, {\n        default: _withCtx(() => [_hoisted_6]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])) : _createCommentVNode(\"v-if\", true)]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\", \"row-class-name\"]), _createCommentVNode(\"分页\"), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_el_pagination, {\n    currentPage: $data.currentPage,\n    \"onUpdate:currentPage\": _cache[0] || (_cache[0] = $event => $data.currentPage = $event),\n    \"page-size\": $data.pageSize,\n    \"page-sizes\": [5, 10, 20],\n    layout: \"total, sizes, prev, pager, next, jumper\",\n    total: $data.total,\n    onSizeChange: $options.handleSizeChange,\n    onCurrentChange: $options.handleCurrentChange\n  }, null, 8\n  /* PROPS */\n  , [\"currentPage\", \"page-size\", \"total\", \"onSizeChange\", \"onCurrentChange\"])])]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_dialog, {\n    modelValue: $data.dialogVisible,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.dialogVisible = $event),\n    width: \"30%\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_9, [$data.evaluate.marmessage != '' && $data.evaluate.marmessage != null ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 0,\n      type: \"primary\",\n      onClick: _cache[2] || (_cache[2] = $event => $data.dialogVisible = false)\n    }, {\n      default: _withCtx(() => [_hoisted_10]),\n      _: 1\n      /* STABLE */\n\n    })) : _createCommentVNode(\"v-if\", true), $data.evaluate.marmessage == null ? (_openBlock(), _createBlock(_component_el_button, {\n      key: 1,\n      type: \"primary\",\n      onClick: $options.returnEvaluate\n    }, {\n      default: _withCtx(() => [_hoisted_11]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_button, {\n      onClick: _cache[3] || (_cache[3] = $event => $data.dialogVisible = false)\n    }, {\n      default: _withCtx(() => [_hoisted_12]),\n      _: 1\n      /* STABLE */\n\n    })])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: _ctx.form,\n      \"label-width\": \"120px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"时间\",\n        style: {\n          \"font-weight\": \"bolder\"\n        }\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.evaluate.stime), 1\n        /* TEXT */\n        )]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        label: \"评分\",\n        style: {\n          \"font-weight\": \"bolder\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_rate, {\n          modelValue: $data.evaluate.source,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.evaluate.source = $event),\n          disabled: \"\",\n          size: \"large\",\n          style: {\n            \"margin-top\": \"3px\"\n          }\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), $data.evaluate.url != '' ? (_openBlock(), _createBlock(_component_el_form_item, {\n        key: 0,\n        label: \"图片\",\n        style: {\n          \"font-weight\": \"bolder\"\n        }\n      }, {\n        default: _withCtx(scope => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.evaluate.url, (item, i) => {\n          return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_image, {\n            style: {\n              \"width\": \"100px\",\n              \"height\": \"100px\"\n            },\n            src: item,\n            \"preview-src-list\": [item]\n          }, null, 8\n          /* PROPS */\n          , [\"src\", \"preview-src-list\"])]);\n        }), 256\n        /* UNKEYED_FRAGMENT */\n        ))]),\n        _: 1\n        /* STABLE */\n\n      })) : _createCommentVNode(\"v-if\", true), $data.evaluate.message != '' ? (_openBlock(), _createBlock(_component_el_form_item, {\n        key: 1,\n        label: \"评论\",\n        style: {\n          \"font-weight\": \"bolder\"\n        }\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.evaluate.message), 1\n        /* TEXT */\n        )]),\n        _: 1\n        /* STABLE */\n\n      })) : _createCommentVNode(\"v-if\", true), $data.evaluate.marmessage != '' && $data.evaluate.marmessage != null ? (_openBlock(), _createBlock(_component_el_form_item, {\n        key: 2,\n        label: \"回复\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.evaluate.marmessage), 1\n        /* TEXT */\n        )]),\n        _: 1\n        /* STABLE */\n\n      })) : _createCommentVNode(\"v-if\", true)]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"model\"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","style","id","_createElementVNode","_createVNode","_component_el_table","data","$data","border","$options","_createCommentVNode","_component_el_table_column","prop","label","sortable","default","scope","_createElementBlock","_Fragment","_renderList","row","dish","item","_toDisplayString","state","_createBlock","_component_el_select","ride","$event","_component_el_option","key","code","name","value","disabled","fixed","width","_component_el_button","type","size","onClick","_component_el_pagination","currentPage","layout","total","onSizeChange","onCurrentChange","_component_el_dialog","footer","marmessage","_component_el_form","model","_ctx","_component_el_form_item","stime","_component_el_rate","source","url","i","_component_el_image","src","message"],"sourceRoot":"","sources":["E:\\notejs\\manage\\vue\\src\\views\\orderManage.vue"],"sourcesContent":["<template>\r\n    <div class=\"dishManage_table\" style=\"width: 100%;\">\r\n        <el-table :data=\"tableData\" border :row-class-name=\"rowClassName\">\r\n<!--            <el-table-column prop=\"id\" label=\"订单ID\" sortable width=\"100\"/>-->\r\n            <el-table-column prop=\"stime\" label=\"时间\" sortable/>\r\n            <el-table-column prop=\"dish\" label=\"菜品\">\r\n                <template #default=\"scope\">\r\n                    <div>\r\n                        <ul>\r\n                            <li v-for=\"item in scope.row.dish\">\r\n                                {{item}}\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"message\" label=\"备注\"/>\r\n            <el-table-column prop=\"people\" label=\"收货人\" />\r\n            <el-table-column prop=\"address\" label=\"收货地址\" sortable />\r\n            <el-table-column label=\"骑手\" prop=\"ride\">\r\n                <template #default=\"scope\">\r\n                    <el-select v-if=\"scope.row.state == '已接单,等待配送'\" v-model=\"scope.row.ride\" prop=\"ride\" >\r\n                        <el-option\r\n                                v-for=\"item in options\"\r\n                                :key=\"item.code\"\r\n                                :label=\"item.name\"\r\n                                :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                    <el-select v-else v-model=\"scope.row.ride\" prop=\"ride\" disabled>\r\n                        <el-option\r\n                                v-for=\"item in options\"\r\n                                :key=\"item.code\"\r\n                                :label=\"item.name\"\r\n                                :value=\"item.code\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"state\" label=\"状态\" sortable />\r\n            <el-table-column fixed=\"right\" label=\"操作\" :width=\"100\" >\r\n                <template #default=\"scope\">\r\n                    <el-button v-if=\"scope.row.state == '等待接单'\" type=\"text\" size=\"small\" @click=\"acceptOrder(scope.row)\">接单</el-button>\r\n                    <el-button v-if=\"scope.row.state == '已接单,等待配送'\" type=\"text\" size=\"small\" @click=\"postOrder(scope.row)\">派送</el-button>\r\n                    <el-button v-if=\"scope.row.state == '正在配送'\" type=\"text\" size=\"small\" style=\"color: #cccccc\">正在派送</el-button>\r\n                    <el-button v-if=\"scope.row.state == '完成'\" type=\"text\" size=\"small\" style=\"color: #cccccc\">已完成</el-button>\r\n                    <el-button v-if=\"scope.row.state == '用户已评论' || scope.row.state == '已回复'\" type=\"text\" size=\"small\" @click=\"showEvaluate(scope.row)\">查看评论</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <!--分页-->\r\n        <div style=\"margin-top: 10px\">\r\n            <el-pagination\r\n                    v-model:currentPage=\"currentPage\"\r\n                    :page-size=\"pageSize\"\r\n                    :page-sizes=\"[5, 10, 20]\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=total\r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n            >\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n    <div class=\"evaluateWindow\" id=\"evaluateWindow\">\r\n        <el-dialog v-model=\"dialogVisible\" width=\"30%\">\r\n            <el-form :model=\"form\" label-width=\"120px\">\r\n                <el-form-item label=\"时间\" style=\"font-weight: bolder\">\r\n                    {{evaluate.stime}}\r\n                </el-form-item>\r\n                <el-form-item label=\"评分\" style=\"font-weight: bolder\">\r\n                    <el-rate\r\n                            v-model=\"evaluate.source\"\r\n                            disabled\r\n                            size=\"large\"\r\n                            style=\"margin-top: 3px\"\r\n                    />\r\n                </el-form-item>\r\n                <el-form-item label=\"图片\" v-if=\"evaluate.url != ''\" style=\"font-weight: bolder\">\r\n                    <template #default=\"scope\">\r\n                        <div v-for=\"(item,i) in evaluate.url\">\r\n                            <el-image\r\n                                    style=\"width: 100px;height: 100px;\"\r\n                                    :src=\"item\"\r\n                                    :preview-src-list=\"[item]\">\r\n                            </el-image>\r\n                        </div>\r\n                    </template>\r\n                </el-form-item>\r\n                <el-form-item label=\"评论\" v-if=\"evaluate.message != ''\" style=\"font-weight: bolder\">\r\n                    {{evaluate.message}}\r\n                </el-form-item>\r\n                <el-form-item label=\"回复\" v-if=\"evaluate.marmessage != '' && evaluate.marmessage != null\">\r\n                    {{evaluate.marmessage}}\r\n                </el-form-item>\r\n            </el-form>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                    <el-button type=\"primary\" v-if=\"evaluate.marmessage != '' && evaluate.marmessage != null\" @click=\"dialogVisible = false\">确定</el-button>\r\n                    <el-button type=\"primary\" v-if=\"evaluate.marmessage == null\" @click=\"returnEvaluate\">回复</el-button>\r\n                    <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import request from \"@/utils/requst\";\r\n    import { ElMessage, ElMessageBox } from 'element-plus';\r\n\r\n    export default {\r\n        name: \"orderManage\",\r\n        components: {\r\n\r\n        },\r\n        data(){\r\n            return{\r\n                // isMax : false,//动态绑定表单中上传框\r\n                // search:'', //搜索关键词\r\n                returnData:[],\r\n                tableData:[], //表格数据\r\n                total:0, //数据量\r\n                currentPage:1, //页码\r\n                pageSize:10, //页容量\r\n                dialogVisible:false, //评论窗口\r\n                // form:{} //新增表单\r\n                options: [],\r\n                evaluate:{}\r\n            }\r\n        },\r\n        created() {\r\n            //页面加载时的方法\r\n            this.getData();\r\n            this.rideList();\r\n        },\r\n        methods: {\r\n            //渲染tabledata\r\n            getData(){\r\n                var that = this;\r\n                request.get(\"/order\",{\r\n                    params:{\r\n                        pageNum:this.currentPage,\r\n                        pageSize:this.pageSize,\r\n                        id: eval(\"(\" + sessionStorage.getItem(\"data\") + \")\").id\r\n                    }\r\n                }).then(res=>{\r\n                    this.returnData = JSON.parse(JSON.stringify(res.data.records))//深拷贝,独立对象\r\n                    this.tableData = res.data.records;\r\n                    this.total = res.data.total;\r\n\r\n                    //处理时间\r\n                    for (var i = 0; i < this.tableData.length; i++){\r\n                        // console.log(this.tableData[i].stime);\r\n                        var newDate = new Date();\r\n                        newDate.setTime(this.tableData[i].stime);\r\n                        // console.log(newDate.toLocaleString());\r\n                        this.tableData[i].stime = newDate.toLocaleString();\r\n                    }\r\n\r\n\r\n                    //处理菜品\r\n                    for (var i = 0; i < this.tableData.length; i++){\r\n                        let dishlist=[];\r\n                        let dishes = this.tableData[i].dish.split(\" \");\r\n                        let num = 0;\r\n                        for(var j = 0; j < dishes.length; j+=2){\r\n                            let index = i;\r\n                            num = dishes[j+1];\r\n                            // console.log(dishes[j],\" \",dishes[j+1]);\r\n                            request.get(\"/dishes/getDataById\",{\r\n                                params:{\r\n                                    id: dishes[j]\r\n                                }\r\n                            }).then(res=>{\r\n                                var  dishstr = res.data.name + \" ---*\" +  num;\r\n                                dishlist.push(dishstr)\r\n                                // console.log(index,dishlist);\r\n                                that.tableData[index].dish = dishlist;\r\n                                // console.log(res.data.name)\r\n                                // if(n == dishes.length){\r\n                                    // that.tableData[i].dish = dishlist;\r\n                                    // console.log(\"index\",i)\r\n                                    // console.log(this.tableData[0]);\r\n                                // }\r\n                            })\r\n                        }\r\n                    }\r\n\r\n                    //处理状态\r\n                    for (var i = 0; i < this.tableData.length; i++){\r\n                        if(this.tableData[i].state == \"1\"){\r\n                            this.tableData[i].state = \"等待接单\";\r\n                        }\r\n                        if(this.tableData[i].state == \"2\"){\r\n                            this.tableData[i].state = \"已接单,等待配送\";\r\n                        }\r\n                        if(this.tableData[i].state == \"3\"){\r\n                            this.tableData[i].state = \"正在配送\";\r\n                        }\r\n                        if(this.tableData[i].state == \"4\" && this.tableData[i].evaluate == \"0\"){\r\n                            this.tableData[i].state = \"完成\";\r\n                        }\r\n                        if(this.tableData[i].state == \"4\" && this.tableData[i].evaluate == \"1\"){\r\n                            this.tableData[i].state = \"用户已评论\";\r\n                        }\r\n                        if(this.tableData[i].state == \"4\" && this.tableData[i].evaluate == \"2\"){\r\n                            this.tableData[i].state = \"已回复\";\r\n                        }\r\n                    }\r\n\r\n                    //处理骑手\r\n                    for (var i = 0; i < this.tableData.length; i++){\r\n                        // console.log(1,this.tableData[i].ride)\r\n                        if(this.tableData[i].ride != \"请选择\"){\r\n                            let index = i;\r\n                            request.get(\"/ride/getDataById\",{\r\n                                params:{\r\n                                    sid: this.tableData[i].ride\r\n                                }\r\n                            }).then(res=>{\r\n                                this.tableData[index].ride = res.data.name;\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            //把每一行的索引放进row\r\n            rowClassName({row, rowIndex}) {\r\n                row.index = rowIndex;\r\n            },\r\n            //分页操作\r\n            handleSizeChange(pageSize){\r\n                this.pageSize = pageSize;\r\n                this.getData();\r\n            },\r\n            handleCurrentChange(currentPage){\r\n                this.currentPage = currentPage;\r\n                this.getData();\r\n            },\r\n            //接单\r\n            acceptOrder(e){\r\n                e.state = \"已接单,等待配送\"\r\n                let order = this.returnData[e.index];\r\n                order.state=\"2\";\r\n                console.log(order);\r\n                request.put(\"/order/updateOrder\",order).then(res=>{\r\n                    console.log(res)\r\n                    if(res.code === '0'){\r\n                        this.$message({\r\n                            type:\"success\",\r\n                            message:\"接单成功\"\r\n                        });\r\n                            // this.getData();\r\n                    }else {\r\n                        this.$message({\r\n                            type:\"error\",\r\n                            message:res.message\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            //派送\r\n            postOrder(e){\r\n                if(e.ride == \"请选择\"){\r\n                    alert(\"请选择骑手\");\r\n                }else {\r\n                    e.state = \"正在配送\";\r\n                    let order = this.returnData[e.index];\r\n                    order.state = \"3\";\r\n                    order.ride = e.ride;\r\n                    request.put(\"/order/updateOrder\",order).then(res=>{\r\n                        console.log(res)\r\n                        if(res.code === '0'){\r\n                            this.$message({\r\n                                type:\"success\",\r\n                                message:\"派送成功\"\r\n                            });\r\n                            // this.getData();\r\n                        }else {\r\n                            this.$message({\r\n                                type:\"error\",\r\n                                message:res.message\r\n                            })\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            //获取骑手列表\r\n            rideList(){\r\n                var that = this;\r\n                request.get(\"/ride/getRideList\",{\r\n                    params:{\r\n                        id: eval(\"(\" + sessionStorage.getItem(\"data\") + \")\").id\r\n                    }\r\n                }).then(\r\n                    res=>{\r\n                        var list = eval(res.msg);\r\n                        list.forEach(ride => {\r\n                            that.options.push({name:ride.name,code:ride.id});\r\n                        })\r\n                    }\r\n                )\r\n            },\r\n            //打开表单\r\n            showEvaluate(e) {\r\n                var that =this;\r\n                request.get(\"/evaluate/getDataByOrder\", {\r\n                    params: {\r\n                        id: e.id\r\n                    }\r\n                }).then(res => {\r\n                    var date = new Date(parseInt(res.data.stime));\r\n                    var y = date.getFullYear(), m = date.getMonth() + 1, d = date.getDate();\r\n                    res.data.stime  =  y + \"-\" + (m < 10 ? \"0\" + m : m) + \"-\" + (d < 10 ? \"0\" + d : d) + \" \" + date.toTimeString().substr(0, 8);\r\n                    // res.data.isReturn = e.evaluate;\r\n                    res.data.url = res.data.url.split(\",\");\r\n                    that.evaluate = res.data;\r\n                    console.log(res.data)\r\n                })\r\n                this.dialogVisible = true;\r\n            },\r\n            returnEvaluate(){\r\n                var that =this;\r\n                ElMessageBox.prompt('请输入回复信息', '回复', {\r\n                    confirmButtonText: '提交',\r\n                    cancelButtonText: '取消',\r\n                    inputPattern:/^.{1,200}$/,\r\n\r\n                }).then(res => {\r\n                    // console.log(res)\r\n                    request.get(\"/evaluate/returnEvaluate\", {\r\n                        params: {\r\n                            id: that.evaluate.orderid,\r\n                            message:res.value\r\n                        }\r\n                    }).then(rrr=>{\r\n                        that.dialogVisible = false\r\n                        ElMessage({\r\n                            type: 'success',\r\n                            message: `回复成功`,\r\n                        })\r\n                    })\r\n                }).catch(() => {\r\n                })\r\n            },\r\n            getMyDate(str){\r\n                var date = new Date(str),\r\n                    MyYear = date.getFullYear(), //年\r\n                    MyMonth = date.getMonth()+1, //月\r\n                    MyDay = date.getDate(),  //日\r\n                    h = date.getHours(),//小时\r\n                    m = date.getMinutes(),//分钟\r\n                    s = date.getSeconds();//秒数\r\n                // 以自己需要的方式拼接\r\n                var MyTime = MyYear +'-'+ getZero(MyMonth) +'-' + getZero(MyDay)+' ' + getZero(h) + ':' +  getZero(m)+ ':' +  getZero(s);//最后拼接时间\r\n                return MyTime;\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}
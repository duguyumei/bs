{"ast":null,"code":"import { defineComponent, reactive, ref, computed, watch, onMounted, nextTick, onBeforeUnmount, provide, resolveComponent, openBlock, createElementBlock, normalizeClass, withModifiers, createElementVNode, normalizeStyle, createBlock, Transition, withCtx, withDirectives, createVNode, vShow, createCommentVNode, renderSlot, Fragment, renderList, toDisplayString } from 'vue';\nimport { throttle } from 'lodash-unified';\nimport '../../../utils/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { ArrowLeft, ArrowRight } from '@element-plus/icons-vue';\nimport '../../../hooks/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { debugWarn } from '../../../utils/error.mjs';\nimport { addResizeListener, removeResizeListener } from '../../../utils/dom/resize-event.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElCarousel\",\n  components: {\n    ElIcon,\n    ArrowLeft,\n    ArrowRight\n  },\n  props: {\n    initialIndex: {\n      type: Number,\n      default: 0\n    },\n    height: {\n      type: String,\n      default: \"\"\n    },\n    trigger: {\n      type: String,\n      default: \"hover\"\n    },\n    autoplay: {\n      type: Boolean,\n      default: true\n    },\n    interval: {\n      type: Number,\n      default: 3e3\n    },\n    indicatorPosition: {\n      type: String,\n      default: \"\"\n    },\n    indicator: {\n      type: Boolean,\n      default: true\n    },\n    arrow: {\n      type: String,\n      default: \"hover\"\n    },\n    type: {\n      type: String,\n      default: \"\"\n    },\n    loop: {\n      type: Boolean,\n      default: true\n    },\n    direction: {\n      type: String,\n      default: \"horizontal\",\n\n      validator(val) {\n        return [\"horizontal\", \"vertical\"].includes(val);\n      }\n\n    },\n    pauseOnHover: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: [\"change\"],\n\n  setup(props, {\n    emit\n  }) {\n    const ns = useNamespace(\"carousel\");\n    const data = reactive({\n      activeIndex: -1,\n      containerWidth: 0,\n      timer: null,\n      hover: false\n    });\n    const root = ref(null);\n    const items = ref([]);\n    const arrowDisplay = computed(() => props.arrow !== \"never\" && props.direction !== \"vertical\");\n    const hasLabel = computed(() => {\n      return items.value.some(item => item.label.toString().length > 0);\n    });\n    const carouselClasses = computed(() => {\n      const classes = [ns.b(), ns.m(props.direction)];\n\n      if (props.type === \"card\") {\n        classes.push(ns.m(\"card\"));\n      }\n\n      return classes;\n    });\n    const indicatorsClasses = computed(() => {\n      const classes = [ns.e(\"indicators\"), ns.em(\"indicators\", props.direction)];\n\n      if (hasLabel.value) {\n        classes.push(ns.em(\"indicators\", \"labels\"));\n      }\n\n      if (props.indicatorPosition === \"outside\" || props.type === \"card\") {\n        classes.push(ns.em(\"indicators\", \"outside\"));\n      }\n\n      return classes;\n    });\n    const throttledArrowClick = throttle(index => {\n      setActiveItem(index);\n    }, 300, {\n      trailing: true\n    });\n    const throttledIndicatorHover = throttle(index => {\n      handleIndicatorHover(index);\n    }, 300);\n\n    function pauseTimer() {\n      if (data.timer) {\n        clearInterval(data.timer);\n        data.timer = null;\n      }\n    }\n\n    function startTimer() {\n      if (props.interval <= 0 || !props.autoplay || data.timer) return;\n      data.timer = setInterval(() => playSlides(), props.interval);\n    }\n\n    const playSlides = () => {\n      if (data.activeIndex < items.value.length - 1) {\n        data.activeIndex = data.activeIndex + 1;\n      } else if (props.loop) {\n        data.activeIndex = 0;\n      }\n    };\n\n    function setActiveItem(index) {\n      if (typeof index === \"string\") {\n        const filteredItems = items.value.filter(item => item.name === index);\n\n        if (filteredItems.length > 0) {\n          index = items.value.indexOf(filteredItems[0]);\n        }\n      }\n\n      index = Number(index);\n\n      if (isNaN(index) || index !== Math.floor(index)) {\n        debugWarn(\"Carousel\", \"index must be an integer.\");\n        return;\n      }\n\n      const length = items.value.length;\n      const oldIndex = data.activeIndex;\n\n      if (index < 0) {\n        data.activeIndex = props.loop ? length - 1 : 0;\n      } else if (index >= length) {\n        data.activeIndex = props.loop ? 0 : length - 1;\n      } else {\n        data.activeIndex = index;\n      }\n\n      if (oldIndex === data.activeIndex) {\n        resetItemPosition(oldIndex);\n      }\n    }\n\n    function resetItemPosition(oldIndex) {\n      items.value.forEach((item, index) => {\n        item.translateItem(index, data.activeIndex, oldIndex);\n      });\n    }\n\n    function addItem(item) {\n      items.value.push(item);\n    }\n\n    function removeItem(uid) {\n      const index = items.value.findIndex(item => item.uid === uid);\n\n      if (index !== -1) {\n        items.value.splice(index, 1);\n        if (data.activeIndex === index) next();\n      }\n    }\n\n    function itemInStage(item, index) {\n      const length = items.value.length;\n\n      if (index === length - 1 && item.inStage && items.value[0].active || item.inStage && items.value[index + 1] && items.value[index + 1].active) {\n        return \"left\";\n      } else if (index === 0 && item.inStage && items.value[length - 1].active || item.inStage && items.value[index - 1] && items.value[index - 1].active) {\n        return \"right\";\n      }\n\n      return false;\n    }\n\n    function handleMouseEnter() {\n      data.hover = true;\n\n      if (props.pauseOnHover) {\n        pauseTimer();\n      }\n    }\n\n    function handleMouseLeave() {\n      data.hover = false;\n      startTimer();\n    }\n\n    function handleButtonEnter(arrow) {\n      if (props.direction === \"vertical\") return;\n      items.value.forEach((item, index) => {\n        if (arrow === itemInStage(item, index)) {\n          item.hover = true;\n        }\n      });\n    }\n\n    function handleButtonLeave() {\n      if (props.direction === \"vertical\") return;\n      items.value.forEach(item => {\n        item.hover = false;\n      });\n    }\n\n    function handleIndicatorClick(index) {\n      data.activeIndex = index;\n    }\n\n    function handleIndicatorHover(index) {\n      if (props.trigger === \"hover\" && index !== data.activeIndex) {\n        data.activeIndex = index;\n      }\n    }\n\n    function prev() {\n      setActiveItem(data.activeIndex - 1);\n    }\n\n    function next() {\n      setActiveItem(data.activeIndex + 1);\n    }\n\n    watch(() => data.activeIndex, (current, prev2) => {\n      resetItemPosition(prev2);\n\n      if (prev2 > -1) {\n        emit(\"change\", current, prev2);\n      }\n    });\n    watch(() => props.autoplay, current => {\n      current ? startTimer() : pauseTimer();\n    });\n    watch(() => props.loop, () => {\n      setActiveItem(data.activeIndex);\n    });\n    onMounted(() => {\n      nextTick(() => {\n        addResizeListener(root.value, resetItemPosition);\n\n        if (props.initialIndex < items.value.length && props.initialIndex >= 0) {\n          data.activeIndex = props.initialIndex;\n        }\n\n        startTimer();\n      });\n    });\n    onBeforeUnmount(() => {\n      if (root.value) removeResizeListener(root.value, resetItemPosition);\n      pauseTimer();\n    });\n    provide(\"injectCarouselScope\", {\n      root,\n      direction: props.direction,\n      type: props.type,\n      items,\n      loop: props.loop,\n      addItem,\n      removeItem,\n      setActiveItem\n    });\n    return {\n      data,\n      props,\n      items,\n      arrowDisplay,\n      carouselClasses,\n      indicatorsClasses,\n      hasLabel,\n      handleMouseEnter,\n      handleMouseLeave,\n      handleIndicatorClick,\n      throttledArrowClick,\n      throttledIndicatorHover,\n      handleButtonEnter,\n      handleButtonLeave,\n      prev,\n      next,\n      setActiveItem,\n      root,\n      ns\n    };\n  }\n\n});\n\nconst _hoisted_1 = [\"onMouseenter\", \"onClick\"];\nconst _hoisted_2 = {\n  key: 0\n};\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_arrow_left = resolveComponent(\"arrow-left\");\n\n  const _component_el_icon = resolveComponent(\"el-icon\");\n\n  const _component_arrow_right = resolveComponent(\"arrow-right\");\n\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"root\",\n    class: normalizeClass(_ctx.carouselClasses),\n    onMouseenter: _cache[6] || (_cache[6] = withModifiers((...args) => _ctx.handleMouseEnter && _ctx.handleMouseEnter(...args), [\"stop\"])),\n    onMouseleave: _cache[7] || (_cache[7] = withModifiers((...args) => _ctx.handleMouseLeave && _ctx.handleMouseLeave(...args), [\"stop\"]))\n  }, [createElementVNode(\"div\", {\n    class: normalizeClass(_ctx.ns.e(\"container\")),\n    style: normalizeStyle({\n      height: _ctx.height\n    })\n  }, [_ctx.arrowDisplay ? (openBlock(), createBlock(Transition, {\n    key: 0,\n    name: \"carousel-arrow-left\"\n  }, {\n    default: withCtx(() => [withDirectives(createElementVNode(\"button\", {\n      type: \"button\",\n      class: normalizeClass([_ctx.ns.e(\"arrow\"), _ctx.ns.em(\"arrow\", \"left\")]),\n      onMouseenter: _cache[0] || (_cache[0] = $event => _ctx.handleButtonEnter(\"left\")),\n      onMouseleave: _cache[1] || (_cache[1] = (...args) => _ctx.handleButtonLeave && _ctx.handleButtonLeave(...args)),\n      onClick: _cache[2] || (_cache[2] = withModifiers($event => _ctx.throttledArrowClick(_ctx.data.activeIndex - 1), [\"stop\"]))\n    }, [createVNode(_component_el_icon, null, {\n      default: withCtx(() => [createVNode(_component_arrow_left)]),\n      _: 1\n    })], 34), [[vShow, (_ctx.arrow === \"always\" || _ctx.data.hover) && (_ctx.props.loop || _ctx.data.activeIndex > 0)]])]),\n    _: 1\n  })) : createCommentVNode(\"v-if\", true), _ctx.arrowDisplay ? (openBlock(), createBlock(Transition, {\n    key: 1,\n    name: \"carousel-arrow-right\"\n  }, {\n    default: withCtx(() => [withDirectives(createElementVNode(\"button\", {\n      type: \"button\",\n      class: normalizeClass([_ctx.ns.e(\"arrow\"), _ctx.ns.em(\"arrow\", \"right\")]),\n      onMouseenter: _cache[3] || (_cache[3] = $event => _ctx.handleButtonEnter(\"right\")),\n      onMouseleave: _cache[4] || (_cache[4] = (...args) => _ctx.handleButtonLeave && _ctx.handleButtonLeave(...args)),\n      onClick: _cache[5] || (_cache[5] = withModifiers($event => _ctx.throttledArrowClick(_ctx.data.activeIndex + 1), [\"stop\"]))\n    }, [createVNode(_component_el_icon, null, {\n      default: withCtx(() => [createVNode(_component_arrow_right)]),\n      _: 1\n    })], 34), [[vShow, (_ctx.arrow === \"always\" || _ctx.data.hover) && (_ctx.props.loop || _ctx.data.activeIndex < _ctx.items.length - 1)]])]),\n    _: 1\n  })) : createCommentVNode(\"v-if\", true), renderSlot(_ctx.$slots, \"default\")], 6), _ctx.indicatorPosition !== \"none\" ? (openBlock(), createElementBlock(\"ul\", {\n    key: 0,\n    class: normalizeClass(_ctx.indicatorsClasses)\n  }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.items, (item, index) => {\n    return openBlock(), createElementBlock(\"li\", {\n      key: index,\n      class: normalizeClass([_ctx.ns.e(\"indicator\"), _ctx.ns.em(\"indicator\", _ctx.direction), _ctx.ns.is(\"active\", index === _ctx.data.activeIndex)]),\n      onMouseenter: $event => _ctx.throttledIndicatorHover(index),\n      onClick: withModifiers($event => _ctx.handleIndicatorClick(index), [\"stop\"])\n    }, [createElementVNode(\"button\", {\n      class: normalizeClass(_ctx.ns.e(\"button\"))\n    }, [_ctx.hasLabel ? (openBlock(), createElementBlock(\"span\", _hoisted_2, toDisplayString(item.label), 1)) : createCommentVNode(\"v-if\", true)], 2)], 42, _hoisted_1);\n  }), 128))], 2)) : createCommentVNode(\"v-if\", true)], 34);\n}\n\nvar Carousel = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Carousel as default };","map":{"version":3,"mappings":";;;;;;;;;;;AA4FA,MAAKA,YAAaC,gBAAa;AAC7BC,QAAM,YADuB;AAE7BC,cAAY;AACVC,UADU;AAEVC,aAFU;AAGVC;AAHU,GAFiB;AAO7BC,SAAO;AACLC,kBAAc;AACZC,YAAMC,MADM;AAEZC,eAAS;AAFG,KADT;AAKLC,YAAQ;AAAEH,YAAMI,MAAR;AAAgBF,eAAS;AAAzB,KALH;AAMLG,aAAS;AACPL,YAAMI,MADC;AAEPF,eAAS;AAFF,KANJ;AAULI,cAAU;AACRN,YAAMO,OADE;AAERL,eAAS;AAFD,KAVL;AAcLM,cAAU;AACRR,YAAMC,MADE;AAERC,eAAS;AAFD,KAdL;AAkBLO,uBAAmB;AAAET,YAAMI,MAAR;AAAgBF,eAAS;AAAzB,KAlBd;AAmBLQ,eAAW;AACTV,YAAMO,OADG;AAETL,eAAS;AAFA,KAnBN;AAuBLS,WAAO;AACLX,YAAMI,MADD;AAELF,eAAS;AAFJ,KAvBF;AA2BLF,UAAM;AAAEA,YAAMI,MAAR;AAAgBF,eAAS;AAAzB,KA3BD;AA4BLU,UAAM;AACJZ,YAAMO,OADF;AAEJL,eAAS;AAFL,KA5BD;AAgCLW,eAAW;AACTb,YAAMI,MADG;AAETF,eAAS,YAFA;;AAGTY,gBAAUC,GAAV,EAAuB;AACrB,eAAO,CAAC,YAAD,EAAe,UAAf,EAA2BC,QAA3B,CAAoCD,GAApC,CAAP;AAA2C;;AAJpC,KAhCN;AAuCLE,kBAAc;AACZjB,YAAMO,OADM;AAEZL,eAAS;AAFG;AAvCT,GAPsB;AAmD7BgB,SAAO,CAAC,QAAD,CAnDsB;;AAoD7BC,QAAMrB,KAAN,EAA6B;AAAEsB;AAAF,GAA7B,EAAuC;AACrC,UAAMC,KAAKC,aAAa,UAAb,CAAX;AAEA,UAAMC,OAAOC,SAKV;AACDC,mBAAa,EADZ;AAEDC,sBAAgB,CAFf;AAGDC,aAAO,IAHN;AAIDC,aAAO;AAJN,KALU,CAAb;AAaA,UAAMC,OAAOC,IAAI,IAAJ,CAAb;AACA,UAAMC,QAAQD,IAAoB,EAApB,CAAd;AAGA,UAAME,eAAeC,SACnB,MAAMnC,MAAMa,KAAN,KAAgB,OAAhB,IAA2Bb,MAAMe,SAAN,KAAoB,UADlC,CAArB;AAIA,UAAMqB,WAAWD,SAAS,MAAM;AAC9B,aAAOF,MAAMI,KAAN,CAAYC,IAAZ,CAAkBC,IAAD,IAAUA,KAAKC,KAAL,CAAWC,QAAX,GAAsBC,MAAtB,GAA+B,CAA1D,CAAP;AAAiE,KADlD,CAAjB;AAIA,UAAMC,kBAAkBR,SAAS,MAAM;AACrC,YAAMS,UAAU,CAACrB,GAAGsB,CAAH,EAAD,EAAStB,GAAGuB,CAAH,CAAK9C,MAAMe,SAAX,CAAT,CAAhB;;AACA,UAAIf,MAAME,IAAN,KAAe,MAAnB,EAA2B;AACzB0C,gBAAQG,IAAR,CAAaxB,GAAGuB,CAAH,CAAK,MAAL,CAAb;AAAkB;;AAEpB,aAAOF,OAAP;AAAO,KALe,CAAxB;AAQA,UAAMI,oBAAoBb,SAAS,MAAM;AACvC,YAAMS,UAAU,CAACrB,GAAG0B,CAAH,CAAK,YAAL,CAAD,EAAqB1B,GAAG2B,EAAH,CAAM,YAAN,EAAoBlD,MAAMe,SAA1B,CAArB,CAAhB;;AACA,UAAIqB,SAASC,KAAb,EAAoB;AAClBO,gBAAQG,IAAR,CAAaxB,GAAG2B,EAAH,CAAM,YAAN,EAAoB,QAApB,CAAb;AAAiC;;AAEnC,UAAIlD,MAAMW,iBAAN,KAA4B,SAA5B,IAAyCX,MAAME,IAAN,KAAe,MAA5D,EAAoE;AAClE0C,gBAAQG,IAAR,CAAaxB,GAAG2B,EAAH,CAAM,YAAN,EAAoB,SAApB,CAAb;AAAiC;;AAEnC,aAAON,OAAP;AAAO,KARiB,CAA1B;AAYA,UAAMO,sBAAsBC,SACzBC,KAAD,IAAW;AACTC,oBAAcD,KAAd;AAAc,KAFU,EAI1B,GAJ0B,EAK1B;AAAEE,gBAAU;AAAZ,KAL0B,CAA5B;AAQA,UAAMC,0BAA0BJ,SAAUC,KAAD,IAAW;AAClDI,2BAAqBJ,KAArB;AAAqB,KADS,EAE7B,GAF6B,CAAhC;;AAIA,0BAAsB;AACpB,UAAI5B,KAAKI,KAAT,EAAgB;AACd6B,sBAAcjC,KAAKI,KAAnB;AACAJ,aAAKI,KAAL,GAAa,IAAb;AAAa;AAAA;;AAIjB,0BAAsB;AACpB,UAAI7B,MAAMU,QAAN,IAAkB,CAAlB,IAAuB,CAACV,MAAMQ,QAA9B,IAA0CiB,KAAKI,KAAnD,EAA0D;AAC1DJ,WAAKI,KAAL,GAAa8B,YAAY,MAAMC,YAAlB,EAAgC5D,MAAMU,QAAtC,CAAb;AAAmD;;AAGrD,UAAMkD,aAAa,MAAM;AACvB,UAAInC,KAAKE,WAAL,GAAmBM,MAAMI,KAAN,CAAYK,MAAZ,GAAqB,CAA5C,EAA+C;AAC7CjB,aAAKE,WAAL,GAAmBF,KAAKE,WAAL,GAAmB,CAAtC;AAAsC,OADxC,MACwC,IAC7B3B,MAAMc,IADuB,EACjB;AACrBW,aAAKE,WAAL,GAAmB,CAAnB;AAAmB;AAAA,KAJvB;;AAQA,2BAAuB0B,KAAvB,EAA8B;AAC5B,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,cAAMQ,gBAAgB5B,MAAMI,KAAN,CAAYyB,MAAZ,CAAoBvB,IAAD,IAAUA,KAAK5C,IAAL,KAAc0D,KAA3C,CAAtB;;AACA,YAAIQ,cAAcnB,MAAd,GAAuB,CAA3B,EAA8B;AAC5BW,kBAAQpB,MAAMI,KAAN,CAAY0B,OAAZ,CAAoBF,cAAc,CAAd,CAApB,CAAR;AAA0C;AAAA;;AAG9CR,cAAQlD,OAAOkD,KAAP,CAAR;;AACA,UAAIW,MAAMX,KAAN,KAAgBA,UAAUY,KAAKC,KAAL,CAAWb,KAAX,CAA9B,EAAiD;AAC/Cc,kBAAU,UAAV,EAAsB,2BAAtB;AACA;AAAA;;AAEF,YAAMzB,SAAST,MAAMI,KAAN,CAAYK,MAA3B;AACA,YAAM0B,WAAW3C,KAAKE,WAAtB;;AACA,UAAI0B,QAAQ,CAAZ,EAAe;AACb5B,aAAKE,WAAL,GAAmB3B,MAAMc,IAAN,GAAa4B,SAAS,CAAtB,GAA0B,CAA7C;AAA6C,OAD/C,MAC+C,IACpCW,SAASX,MAD2B,EACnB;AAC1BjB,aAAKE,WAAL,GAAmB3B,MAAMc,IAAN,GAAa,CAAb,GAAiB4B,SAAS,CAA7C;AAA6C,OAFA,MAGxC;AACLjB,aAAKE,WAAL,GAAmB0B,KAAnB;AAAmB;;AAErB,UAAIe,aAAa3C,KAAKE,WAAtB,EAAmC;AACjC0C,0BAAkBD,QAAlB;AAAkB;AAAA;;AAItB,+BAA2BA,QAA3B,EAAqC;AACnCnC,YAAMI,KAAN,CAAYiC,OAAZ,CAAoB,CAAC/B,IAAD,EAAOc,KAAP,KAAiB;AACnCd,aAAKgC,aAAL,CAAmBlB,KAAnB,EAA0B5B,KAAKE,WAA/B,EAA4CyC,QAA5C;AAA4C,OAD9C;AAC8C;;AAIhD,qBAAiB7B,IAAjB,EAAuB;AACrBN,YAAMI,KAAN,CAAYU,IAAZ,CAAiBR,IAAjB;AAAiB;;AAGnB,wBAAoBiC,GAApB,EAAyB;AACvB,YAAMnB,QAAQpB,MAAMI,KAAN,CAAYoC,SAAZ,CAAuBlC,IAAD,IAAUA,KAAKiC,GAAL,KAAaA,GAA7C,CAAd;;AACA,UAAInB,UAAU,EAAd,EAAkB;AAChBpB,cAAMI,KAAN,CAAYqC,MAAZ,CAAmBrB,KAAnB,EAA0B,CAA1B;AACA,YAAI5B,KAAKE,WAAL,KAAqB0B,KAAzB,EAAgCsB;AAAA;AAAA;;AAIpC,yBAAqBpC,IAArB,EAA2Bc,KAA3B,EAAkC;AAChC,YAAMX,SAAST,MAAMI,KAAN,CAAYK,MAA3B;;AACA,UACGW,UAAUX,SAAS,CAAnB,IAAwBH,KAAKqC,OAA7B,IAAwC3C,MAAMI,KAAN,CAAY,CAAZ,EAAewC,MAAvD,IACAtC,KAAKqC,OAAL,IACC3C,MAAMI,KAAN,CAAYgB,QAAQ,CAApB,CADD,IAECpB,MAAMI,KAAN,CAAYgB,QAAQ,CAApB,EAAuBwB,MAJ3B,EAKE;AACA,eAAO,MAAP;AAAO,OANT,MAMS,IAENxB,UAAU,CAAV,IAAed,KAAKqC,OAApB,IAA+B3C,MAAMI,KAAN,CAAYK,SAAS,CAArB,EAAwBmC,MAAvD,IACAtC,KAAKqC,OAAL,IACC3C,MAAMI,KAAN,CAAYgB,QAAQ,CAApB,CADD,IAECpB,MAAMI,KAAN,CAAYgB,QAAQ,CAApB,EAAuBwB,MALlB,EAMP;AACA,eAAO,OAAP;AAAO;;AAET,aAAO,KAAP;AAAO;;AAGT,gCAA4B;AAC1BpD,WAAKK,KAAL,GAAa,IAAb;;AACA,UAAI9B,MAAMmB,YAAV,EAAwB;AACtB2D;AAAA;AAAA;;AAIJ,gCAA4B;AAC1BrD,WAAKK,KAAL,GAAa,KAAb;AACAiD;AAAA;;AAGF,+BAA2BlE,KAA3B,EAAkC;AAChC,UAAIb,MAAMe,SAAN,KAAoB,UAAxB,EAAoC;AACpCkB,YAAMI,KAAN,CAAYiC,OAAZ,CAAoB,CAAC/B,IAAD,EAAOc,KAAP,KAAiB;AACnC,YAAIxC,UAAUmE,YAAYzC,IAAZ,EAAkBc,KAAlB,CAAd,EAAwC;AACtCd,eAAKT,KAAL,GAAa,IAAb;AAAa;AAAA,OAFjB;AAEiB;;AAKnB,iCAA6B;AAC3B,UAAI9B,MAAMe,SAAN,KAAoB,UAAxB,EAAoC;AACpCkB,YAAMI,KAAN,CAAYiC,OAAZ,CAAqB/B,IAAD,IAAU;AAC5BA,aAAKT,KAAL,GAAa,KAAb;AAAa,OADf;AACe;;AAIjB,kCAA8BuB,KAA9B,EAAqC;AACnC5B,WAAKE,WAAL,GAAmB0B,KAAnB;AAAmB;;AAGrB,kCAA8BA,KAA9B,EAAqC;AACnC,UAAIrD,MAAMO,OAAN,KAAkB,OAAlB,IAA6B8C,UAAU5B,KAAKE,WAAhD,EAA6D;AAC3DF,aAAKE,WAAL,GAAmB0B,KAAnB;AAAmB;AAAA;;AAIvB,oBAAgB;AACdC,oBAAc7B,KAAKE,WAAL,GAAmB,CAAjC;AAAiC;;AAGnC,oBAAgB;AACd2B,oBAAc7B,KAAKE,WAAL,GAAmB,CAAjC;AAAiC;;AAInCsD,UACE,MAAMxD,KAAKE,WADb,EAEE,CAACuD,OAAD,EAAUC,KAAV,KAAmB;AACjBd,wBAAkBc,KAAlB;;AACA,UAAIA,QAAO,EAAX,EAAe;AACb7D,aAAK,QAAL,EAAe4D,OAAf,EAAwBC,KAAxB;AAAwB;AAAA,KAL9B;AASAF,UACE,MAAMjF,MAAMQ,QADd,EAEG0E,OAAD,IAAa;AACXA,gBAAUH,YAAV,GAAyBD,YAAzB;AAAyB,KAH7B;AAMAG,UACE,MAAMjF,MAAMc,IADd,EAEE,MAAM;AACJwC,oBAAc7B,KAAKE,WAAnB;AAAmB,KAHvB;AAQAyD,cAAU,MAAM;AACdC,eAAS,MAAM;AACbC,0BAAkBvD,KAAKM,KAAvB,EAA8BgC,iBAA9B;;AACA,YACErE,MAAMC,YAAN,GAAqBgC,MAAMI,KAAN,CAAYK,MAAjC,IACA1C,MAAMC,YAAN,IAAsB,CAFxB,EAGE;AACAwB,eAAKE,WAAL,GAAmB3B,MAAMC,YAAzB;AAAyB;;AAE3B8E;AAAA,OARF;AAQE,KATJ;AAaAQ,oBAAgB,MAAM;AACpB,UAAIxD,KAAKM,KAAT,EAAgBmD,qBAAqBzD,KAAKM,KAA1B,EAAiCgC,iBAAjC;AAChBS;AAAA,KAFF;AAMAW,YAA6B,qBAA7B,EAAoD;AAClD1D,UADkD;AAElDhB,iBAAWf,MAAMe,SAFiC;AAGlDb,YAAMF,MAAME,IAHsC;AAIlD+B,WAJkD;AAKlDnB,YAAMd,MAAMc,IALsC;AAMlD4E,aANkD;AAOlDC,gBAPkD;AAQlDrC;AARkD,KAApD;AAWA,WAAO;AACL7B,UADK;AAELzB,WAFK;AAGLiC,WAHK;AAKLC,kBALK;AAMLS,qBANK;AAOLK,uBAPK;AAQLZ,cARK;AAULwD,sBAVK;AAWLC,sBAXK;AAYLC,0BAZK;AAaL3C,yBAbK;AAcLK,6BAdK;AAeLuC,uBAfK;AAgBLC,uBAhBK;AAkBLC,UAlBK;AAmBLtB,UAnBK;AAoBLrB,mBApBK;AAsBLvB,UAtBK;AAuBLR;AAvBK,KAAP;AAuBE;;AA/TyB,CAAb,CAAlB;;;;;;;;;;;;;;sBA3FE2E,mBA4DM,KA5DNA,EA4DM;AA3DJlE,SAAI,MA2DA;AA1DHmE,WAAKC,eAAEC,oBAAFD,CA0DF;AAzDHE,kBAAUC,qDAAOF,uDAAP,EAAuB,QAAvB,EAyDP;AAxDHG,kBAAUD,qDAAOF,uDAAP,EAAuB,QAAvB;AAwDP,GA5DNH,EAIoC,CAElCO,mBAoCM,KApCNA,EAoCM;AApCAN,WAAKC,eAAEC,QAAGpD,CAAH,CAAI,WAAJ,CAAFmD,CAoCL;AApC2BM,WAAKC;AAAAA,cAAYN;AAAZM;AAoChC,GApCNF,EAAkD,CAC9BJ,kCAAlBO,YAgBaC,UAhBbD,EAgBaC;AAAAC;AAhBmBnH,UAAK;AAgBxBkH,GAhBbD,EAAqC;qBACnC,MAcS,gBAdTH,mBAcS,QAdTA,EAcS;AATPvG,YAAK,QASE;AARNiG,aAAKC,gBAAGC,QAAGpD,CAAH,CAAI,OAAJ,CAAHmD,EAAkBC,QAAGnD,EAAH,CAAK,OAAL,EAAK,MAAL,CAAlBkD,EAQC;AAPNE,oBAAUC,oCAAEF,uBAAiB,MAAjB,CAAF,CAOJ;AANNG,oBAAUD,uCAAEF,yDAAF,CAMJ;AALNU,eAAKR,kDAAOF,yBAAoBA,UAAK1E,WAAL,GAAgB,CAApC,CAAP,EAA2C,QAA3C;AAKC,KAdT8E,EASmD,CAEjDO,YAEUC,kBAFVD,EAEU,IAFVA,EAEU;AAAA5G,uBADR,MAAc,CAAd4G,YAAcE,qBAAdF,CAAc,CACN;AADMG;AACN,KAFVH,CAFiD,CATnDP,KAcS,WAbe,gBAAK,QAAL,IAAsBJ,UAAKvE,KAA3B,MAA2BuE,WAA6BvF,IAA7B,IAAqCuF,UAAK1E,WAAL,GAAgB,CAAhF,GAaf,GAf0B;AAEqEwF;AAFrE,GAArCP,CAAkB,oCAD8B,EAkB9BP,kCAAlBO,YAgBaC,UAhBbD,EAgBaC;AAAAC;AAhBmBnH,UAAK;AAgBxBkH,GAhBbD,EAAqC;qBACnC,MAcS,gBAdTH,mBAcS,QAdTA,EAcS;AATPvG,YAAK,QASE;AARNiG,aAAKC,gBAAGC,QAAGpD,CAAH,CAAI,OAAJ,CAAHmD,EAAkBC,QAAGnD,EAAH,CAAK,OAAL,EAAK,OAAL,CAAlBkD,EAQC;AAPNE,oBAAUC,oCAAEF,uBAAiB,OAAjB,CAAF,CAOJ;AANNG,oBAAUD,uCAAEF,yDAAF,CAMJ;AALNU,eAAKR,kDAAOF,yBAAoBA,UAAK1E,WAAL,GAAgB,CAApC,CAAP,EAA2C,QAA3C;AAKC,KAdT8E,EASmD,CAEjDO,YAEUC,kBAFVD,EAEU,IAFVA,EAEU;AAAA5G,uBADR,MAAe,CAAf4G,YAAeI,sBAAfJ,CAAe,CACP;AADOG;AACP,KAFVH,CAFiD,CATnDP,KAcS,WAbe,gBAAK,QAAL,IAAsBJ,UAAKvE,KAA3B,MAA2BuE,WAA6BvF,IAA7B,IAAqCuF,UAAK1E,WAAL,GAAmB0E,WAAM3D,MAAN,GAAY,CAA/F,GAaf,GAf0B;AAEoFyE;AAFpF,GAArCP,CAAkB,oCAlB8B,EAmChDS,WAAahB,WAAbgB,EAAa,SAAbA,CAnCgD,CAAlDZ,EAmCe,CAnCfA,CAFkC,EAuCxBJ,2BAAiB,MAAjB,IAAiBiB,aAA3BpB,mBAgBK,IAhBLA,EAgBK;AAAAY;AAhBoCX,WAAKC,eAAEC,sBAAFD;AAgBzC,GAhBLF,EAAgD,mBAC9CA,mBAcKqB,QAdLrB,EAcKqB,IAdLrB,EAcKqB,WAbqBlB,UAarBkB,EAb0B,CAArBhF,IAAqB,EAAfc,KAAe,KAAV;wBADrB6C,mBAcK,IAdLA,EAcK;AAZFY,WAAKzD,KAYH;AAXF8C,aAAKC,gBAAcC,QAAGpD,CAAH,CAAI,WAAJ,CAAdmD,EAA2CC,QAAGnD,EAAH,CAAK,WAAL,EAAmBmD,cAAnB,CAA3CD,EAAoFC,QAAGmB,EAAH,CAAK,QAAL,EAAgBnE,UAAUgD,UAAK1E,WAA/B,CAApFyE,EAWH;AANFE,oBAAUmB,UAAEpB,6BAAwBhD,KAAxB,CAMV;AALF0D,eAAKW,wBAAOrB,0BAAqBhD,KAArB,CAAPqE,EAAiC,QAAjCA;AAKH,KAdLxB,EASyC,CAEvCO,mBAES,QAFTA,EAES;AAFAN,aAAKC,eAAEC,QAAGpD,CAAH,CAAI,QAAJ,CAAFmD;AAEL,KAFTK,EAAoB,CACNJ,8BAAZH,mBAA6C,MAA7CA,EAA6CyB,UAA7CzB,EAA6C0B,gBAApBrF,KAAKC,KAAe,CAA7C0D,EAAmC,CAAnCA,CAAY,IAAuB2B,gCADjB,CAApBpB,IAFuC,CATzCP;GAcKqB,CAdLrB,MAD8C,EAAhDA,IAAU,oCAvCwB,CAJpCA","names":["_sfc_main","defineComponent","name","components","ElIcon","ArrowLeft","ArrowRight","props","initialIndex","type","Number","default","height","String","trigger","autoplay","Boolean","interval","indicatorPosition","indicator","arrow","loop","direction","validator","val","includes","pauseOnHover","emits","setup","emit","ns","useNamespace","data","reactive","activeIndex","containerWidth","timer","hover","root","ref","items","arrowDisplay","computed","hasLabel","value","some","item","label","toString","length","carouselClasses","classes","b","m","push","indicatorsClasses","e","em","throttledArrowClick","throttle","index","setActiveItem","trailing","throttledIndicatorHover","handleIndicatorHover","clearInterval","setInterval","playSlides","filteredItems","filter","indexOf","isNaN","Math","floor","debugWarn","oldIndex","resetItemPosition","forEach","translateItem","uid","findIndex","splice","next","inStage","active","pauseTimer","startTimer","itemInStage","watch","current","prev2","onMounted","nextTick","addResizeListener","onBeforeUnmount","removeResizeListener","provide","addItem","removeItem","handleMouseEnter","handleMouseLeave","handleIndicatorClick","handleButtonEnter","handleButtonLeave","prev","_createElementBlock","class","_normalizeClass","_ctx","onMouseenter","_cache","onMouseleave","_createElementVNode","style","_normalizeStyle","_createBlock","_Transition","key","onClick","_createVNode","_component_el_icon","_component_arrow_left","_","_component_arrow_right","_renderSlot","openBlock","_Fragment","is","$event","_withModifiers","_hoisted_2","toDisplayString","createCommentVNode"],"sources":["../../../../../../packages/components/carousel/src/main.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"root\"\n    :class=\"carouselClasses\"\n    @mouseenter.stop=\"handleMouseEnter\"\n    @mouseleave.stop=\"handleMouseLeave\"\n  >\n    <div :class=\"ns.e('container')\" :style=\"{ height: height }\">\n      <transition v-if=\"arrowDisplay\" name=\"carousel-arrow-left\">\n        <button\n          v-show=\"\n            (arrow === 'always' || data.hover) &&\n            (props.loop || data.activeIndex > 0)\n          \"\n          type=\"button\"\n          :class=\"[ns.e('arrow'), ns.em('arrow', 'left')]\"\n          @mouseenter=\"handleButtonEnter('left')\"\n          @mouseleave=\"handleButtonLeave\"\n          @click.stop=\"throttledArrowClick(data.activeIndex - 1)\"\n        >\n          <el-icon>\n            <arrow-left />\n          </el-icon>\n        </button>\n      </transition>\n      <transition v-if=\"arrowDisplay\" name=\"carousel-arrow-right\">\n        <button\n          v-show=\"\n            (arrow === 'always' || data.hover) &&\n            (props.loop || data.activeIndex < items.length - 1)\n          \"\n          type=\"button\"\n          :class=\"[ns.e('arrow'), ns.em('arrow', 'right')]\"\n          @mouseenter=\"handleButtonEnter('right')\"\n          @mouseleave=\"handleButtonLeave\"\n          @click.stop=\"throttledArrowClick(data.activeIndex + 1)\"\n        >\n          <el-icon>\n            <arrow-right />\n          </el-icon>\n        </button>\n      </transition>\n      <slot></slot>\n    </div>\n    <ul v-if=\"indicatorPosition !== 'none'\" :class=\"indicatorsClasses\">\n      <li\n        v-for=\"(item, index) in items\"\n        :key=\"index\"\n        :class=\"[\n          ns.e('indicator'),\n          ns.em('indicator', direction),\n          ns.is('active', index === data.activeIndex),\n        ]\"\n        @mouseenter=\"throttledIndicatorHover(index)\"\n        @click.stop=\"handleIndicatorClick(index)\"\n      >\n        <button :class=\"ns.e('button')\">\n          <span v-if=\"hasLabel\">{{ item.label }}</span>\n        </button>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  reactive,\n  computed,\n  ref,\n  provide,\n  onMounted,\n  onBeforeUnmount,\n  watch,\n  nextTick,\n} from 'vue'\nimport { throttle } from 'lodash-unified'\nimport {\n  addResizeListener,\n  removeResizeListener,\n  debugWarn,\n} from '@element-plus/utils'\nimport { ElIcon } from '@element-plus/components/icon'\nimport { ArrowLeft, ArrowRight } from '@element-plus/icons-vue'\nimport { useNamespace } from '@element-plus/hooks'\n\nimport type {\n  ICarouselProps,\n  CarouselItem,\n  InjectCarouselScope,\n} from './carousel'\n\nexport default defineComponent({\n  name: 'ElCarousel',\n  components: {\n    ElIcon,\n    ArrowLeft,\n    ArrowRight,\n  },\n  props: {\n    initialIndex: {\n      type: Number,\n      default: 0,\n    },\n    height: { type: String, default: '' },\n    trigger: {\n      type: String,\n      default: 'hover',\n    },\n    autoplay: {\n      type: Boolean,\n      default: true,\n    },\n    interval: {\n      type: Number,\n      default: 3000,\n    },\n    indicatorPosition: { type: String, default: '' },\n    indicator: {\n      type: Boolean,\n      default: true,\n    },\n    arrow: {\n      type: String,\n      default: 'hover',\n    },\n    type: { type: String, default: '' },\n    loop: {\n      type: Boolean,\n      default: true,\n    },\n    direction: {\n      type: String,\n      default: 'horizontal',\n      validator(val: string) {\n        return ['horizontal', 'vertical'].includes(val)\n      },\n    },\n    pauseOnHover: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  emits: ['change'],\n  setup(props: ICarouselProps, { emit }) {\n    const ns = useNamespace('carousel')\n    // data\n    const data = reactive<{\n      activeIndex: number\n      containerWidth: number\n      timer: null | ReturnType<typeof setInterval>\n      hover: boolean\n    }>({\n      activeIndex: -1,\n      containerWidth: 0,\n      timer: null,\n      hover: false,\n    })\n\n    // refs\n    const root = ref(null)\n    const items = ref<CarouselItem[]>([])\n\n    // computed\n    const arrowDisplay = computed(\n      () => props.arrow !== 'never' && props.direction !== 'vertical'\n    )\n\n    const hasLabel = computed(() => {\n      return items.value.some((item) => item.label.toString().length > 0)\n    })\n\n    const carouselClasses = computed(() => {\n      const classes = [ns.b(), ns.m(props.direction)]\n      if (props.type === 'card') {\n        classes.push(ns.m('card'))\n      }\n      return classes\n    })\n\n    const indicatorsClasses = computed(() => {\n      const classes = [ns.e('indicators'), ns.em('indicators', props.direction)]\n      if (hasLabel.value) {\n        classes.push(ns.em('indicators', 'labels'))\n      }\n      if (props.indicatorPosition === 'outside' || props.type === 'card') {\n        classes.push(ns.em('indicators', 'outside'))\n      }\n      return classes\n    })\n\n    // methods\n    const throttledArrowClick = throttle(\n      (index) => {\n        setActiveItem(index)\n      },\n      300,\n      { trailing: true }\n    )\n\n    const throttledIndicatorHover = throttle((index) => {\n      handleIndicatorHover(index)\n    }, 300)\n\n    function pauseTimer() {\n      if (data.timer) {\n        clearInterval(data.timer)\n        data.timer = null\n      }\n    }\n\n    function startTimer() {\n      if (props.interval <= 0 || !props.autoplay || data.timer) return\n      data.timer = setInterval(() => playSlides(), props.interval)\n    }\n\n    const playSlides = () => {\n      if (data.activeIndex < items.value.length - 1) {\n        data.activeIndex = data.activeIndex + 1\n      } else if (props.loop) {\n        data.activeIndex = 0\n      }\n    }\n\n    function setActiveItem(index) {\n      if (typeof index === 'string') {\n        const filteredItems = items.value.filter((item) => item.name === index)\n        if (filteredItems.length > 0) {\n          index = items.value.indexOf(filteredItems[0])\n        }\n      }\n      index = Number(index)\n      if (isNaN(index) || index !== Math.floor(index)) {\n        debugWarn('Carousel', 'index must be an integer.')\n        return\n      }\n      const length = items.value.length\n      const oldIndex = data.activeIndex\n      if (index < 0) {\n        data.activeIndex = props.loop ? length - 1 : 0\n      } else if (index >= length) {\n        data.activeIndex = props.loop ? 0 : length - 1\n      } else {\n        data.activeIndex = index\n      }\n      if (oldIndex === data.activeIndex) {\n        resetItemPosition(oldIndex)\n      }\n    }\n\n    function resetItemPosition(oldIndex) {\n      items.value.forEach((item, index) => {\n        item.translateItem(index, data.activeIndex, oldIndex)\n      })\n    }\n\n    function addItem(item) {\n      items.value.push(item)\n    }\n\n    function removeItem(uid) {\n      const index = items.value.findIndex((item) => item.uid === uid)\n      if (index !== -1) {\n        items.value.splice(index, 1)\n        if (data.activeIndex === index) next()\n      }\n    }\n\n    function itemInStage(item, index) {\n      const length = items.value.length\n      if (\n        (index === length - 1 && item.inStage && items.value[0].active) ||\n        (item.inStage &&\n          items.value[index + 1] &&\n          items.value[index + 1].active)\n      ) {\n        return 'left'\n      } else if (\n        (index === 0 && item.inStage && items.value[length - 1].active) ||\n        (item.inStage &&\n          items.value[index - 1] &&\n          items.value[index - 1].active)\n      ) {\n        return 'right'\n      }\n      return false\n    }\n\n    function handleMouseEnter() {\n      data.hover = true\n      if (props.pauseOnHover) {\n        pauseTimer()\n      }\n    }\n\n    function handleMouseLeave() {\n      data.hover = false\n      startTimer()\n    }\n\n    function handleButtonEnter(arrow) {\n      if (props.direction === 'vertical') return\n      items.value.forEach((item, index) => {\n        if (arrow === itemInStage(item, index)) {\n          item.hover = true\n        }\n      })\n    }\n\n    function handleButtonLeave() {\n      if (props.direction === 'vertical') return\n      items.value.forEach((item) => {\n        item.hover = false\n      })\n    }\n\n    function handleIndicatorClick(index) {\n      data.activeIndex = index\n    }\n\n    function handleIndicatorHover(index) {\n      if (props.trigger === 'hover' && index !== data.activeIndex) {\n        data.activeIndex = index\n      }\n    }\n\n    function prev() {\n      setActiveItem(data.activeIndex - 1)\n    }\n\n    function next() {\n      setActiveItem(data.activeIndex + 1)\n    }\n\n    // watch\n    watch(\n      () => data.activeIndex,\n      (current, prev) => {\n        resetItemPosition(prev)\n        if (prev > -1) {\n          emit('change', current, prev)\n        }\n      }\n    )\n    watch(\n      () => props.autoplay,\n      (current) => {\n        current ? startTimer() : pauseTimer()\n      }\n    )\n    watch(\n      () => props.loop,\n      () => {\n        setActiveItem(data.activeIndex)\n      }\n    )\n\n    // lifecycle\n    onMounted(() => {\n      nextTick(() => {\n        addResizeListener(root.value, resetItemPosition)\n        if (\n          props.initialIndex < items.value.length &&\n          props.initialIndex >= 0\n        ) {\n          data.activeIndex = props.initialIndex\n        }\n        startTimer()\n      })\n    })\n\n    onBeforeUnmount(() => {\n      if (root.value) removeResizeListener(root.value, resetItemPosition)\n      pauseTimer()\n    })\n\n    // provide\n    provide<InjectCarouselScope>('injectCarouselScope', {\n      root,\n      direction: props.direction,\n      type: props.type,\n      items,\n      loop: props.loop,\n      addItem,\n      removeItem,\n      setActiveItem,\n    })\n\n    return {\n      data,\n      props,\n      items,\n\n      arrowDisplay,\n      carouselClasses,\n      indicatorsClasses,\n      hasLabel,\n\n      handleMouseEnter,\n      handleMouseLeave,\n      handleIndicatorClick,\n      throttledArrowClick,\n      throttledIndicatorHover,\n      handleButtonEnter,\n      handleButtonLeave,\n\n      prev,\n      next,\n      setActiveItem,\n\n      root,\n      ns,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}
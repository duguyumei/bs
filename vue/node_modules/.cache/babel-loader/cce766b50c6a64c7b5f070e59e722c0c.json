{"ast":null,"code":"import request from \"@/utils/requst\";\nexport default {\n  name: \"register\",\n\n  data() {\n    return {\n      form: {},\n      repassword: \"\"\n    };\n  },\n\n  methods: {\n    //记录图片路径\n    filesUploadSuccess(res, file, fileList) {\n      console.log(res);\n\n      if (this.form.url == null || this.form.url == \"\") {\n        this.form.url = \"\";\n        this.form.url = res.data;\n      } else {\n        this.form.url = this.form.url + \"---\" + res.data;\n      }\n\n      console.log(this.form.url);\n    },\n\n    //申请注册\n    register() {\n      this.form.status = -1;\n      request.post(\"/user\", this.form).then(res => {\n        console.log(res);\n\n        if (res.code === '0') {\n          this.$message({\n            type: \"success\",\n            message: \"申请成功\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg()\n          });\n        }\n      });\n    },\n\n    beforeAvatarUpload: function (file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isPNG = file.type === 'image/png';\n      const isPG = isJPG || isPNG; //限制图片格式为jpg / png\n\n      const isLt2M = file.size / 1024 / 1024 < 2; //限制图片大小\n\n      const isSize = new Promise(function (resolve, reject) {\n        let width = 600;\n        let height = 400;\n\n        let _URL = window.URL || window.webkitURL;\n\n        let img = new Image();\n\n        img.onload = function () {\n          let valid = img.width >= width && img.height >= height;\n          valid ? resolve() : reject();\n        };\n\n        img.src = _URL.createObjectURL(file);\n      }).then(() => {\n        return file;\n      }, () => {\n        this.$message.error('上传图片像素要大于600*400!');\n        return promise.reject();\n      });\n\n      if (!isPG) {\n        this.$message.error('上传图片只能是 JPG 或 PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传图片大小不能超过 2MB!');\n      }\n\n      return isPG && isLt2M && isSize;\n    },\n    exceed: function () {\n      this.$message.error('最多只能上传3张图片');\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["request","name","data","form","repassword","methods","filesUploadSuccess","res","file","fileList","console","log","url","register","status","post","then","code","$message","type","message","msg","beforeAvatarUpload","isJPG","isPNG","isPG","isLt2M","size","isSize","Promise","resolve","reject","width","height","_URL","window","URL","webkitURL","img","Image","onload","valid","src","createObjectURL","error","promise","exceed"],"sourceRoot":"","sources":["E:\\notejs\\manage\\vue\\src\\views\\register.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"img\"><img src=\"../assets/register.png\" alt=\"picture\"></div>\r\n        <div class=\"container_main\">\r\n        <el-form  ref=\"form\" :model=\"form\" :label-position=\"left\">\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"form.username\" prefix-icon=\"Avatar\" placeholder=\"请输入账号\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"form.password\" prefix-icon=\"lock\" placeholder=\"请输入密码\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"repassword\" prefix-icon=\"lock\" placeholder=\"请确认密码\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"form.phone\" prefix-icon=\"Iphone\" placeholder=\"请填写手机号码\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"form.name\" prefix-icon=\"house\" placeholder=\"请输入店名\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"form.address\" prefix-icon=\"location\" placeholder=\"请填写实体店地址\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-input class=\"input\" size=\"large\" v-model=\"form.message\" prefix-icon=\"document\" placeholder=\"请填写描述\" show-password></el-input>\r\n            </el-form-item>\r\n<!--            上传证件照片-->\r\n            <el-upload action = \"http://localhost:8090/files/upload/\"\r\n            list-type = \"picture-card\"\r\n            :class = \"{disabled:isMax}\"\r\n            :limit = 5\r\n            :on-success = \"filesUploadSuccess\"\r\n            :on-exceed = \"exceed\"\r\n            :before-upload = \"beforeAvatarUpload\">\r\n            <i class=\"el-icon-upload\"></i>\r\n            <div class=\"el-upload__text\">上传证件照片</div>\r\n            </el-upload>\r\n            <el-form-item style=\"align-content: center \">\r\n                <el-button class=\"btn_login\" style=\"width: 100%;height: 40px\" type=\"primary\" @click=\"register\">注册</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import request from \"@/utils/requst\";\r\n\r\n    export default {\r\n        name: \"register\",\r\n        data(){\r\n            return{\r\n                form:{\r\n                },\r\n                repassword:\"\"\r\n            }\r\n        },\r\n        methods: {\r\n            //记录图片路径\r\n            filesUploadSuccess(res, file, fileList) {\r\n                console.log(res);\r\n                if (this.form.url == null || this.form.url == \"\") {\r\n                    this.form.url = \"\";\r\n                    this.form.url = res.data\r\n                } else {\r\n                    this.form.url = this.form.url + \"---\" + res.data;\r\n                }\r\n                console.log(this.form.url);\r\n            },\r\n            //申请注册\r\n            register() {\r\n                this.form.status = -1;\r\n                request.post(\"/user\", this.form).then(res => {\r\n                    console.log(res)\r\n                    if (res.code === '0') {\r\n                        this.$message({\r\n                            type: \"success\",\r\n                            message: \"申请成功\"\r\n                        })\r\n                    } else {\r\n                        this.$message({\r\n                            type: \"error\",\r\n                            message: res.msg()\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n            beforeAvatarUpload: function (file) {\r\n                const isJPG = file.type === 'image/jpeg';\r\n                const isPNG = file.type === 'image/png';\r\n                const isPG = (isJPG || isPNG)                                       //限制图片格式为jpg / png\r\n                const isLt2M = file.size / 1024 / 1024 < 2;                         //限制图片大小\r\n                const isSize = new Promise(function (resolve, reject) {\r\n                    let width = 600\r\n                    let height = 400\r\n                    let _URL = window.URL || window.webkitURL\r\n                    let img = new Image()\r\n                    img.onload = function () {\r\n                        let valid = img.width >= width && img.height >= height\r\n                        valid ? resolve() : reject();\r\n                    }\r\n                    img.src = _URL.createObjectURL(file)\r\n                }).then(() => {\r\n                    return file;\r\n                }, () => {\r\n                    this.$message.error('上传图片像素要大于600*400!');\r\n                    return promise.reject();\r\n                })\r\n                if (!isPG) {\r\n                    this.$message.error('上传图片只能是 JPG 或 PNG 格式!');\r\n                }\r\n                if (!isLt2M) {\r\n                    this.$message.error('上传图片大小不能超过 2MB!');\r\n                }\r\n                return isPG && isLt2M && isSize\r\n            },\r\n            exceed: function () {\r\n                this.$message.error('最多只能上传3张图片')\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import \"../assets/css/register.css\";\r\n</style>"]},"metadata":{},"sourceType":"module"}